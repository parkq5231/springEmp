<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.emp.service.impl.DeptMapper">
	<select id="getSearchDept" parameterType="dept"
		resultType="dept">
		SELECT *
		FROM DEPARTMENTS
		<where>
			<if test="department_name != null and department_name != ''">
				DEPARTMENT_NAME = #{department_name}
			</if>
			<if test="manager_id != null and manager_id !=''">
				AND MANAGER_ID = #{manager_id}
			</if>
		</where>
		ORDER BY DEPARTMENT_ID
	</select>

	<select id="getDept" parameterType="dept" resultType="dept">
	SELECT 
		d.DEPARTMENT_ID, 
		d.DEPARTMENT_NAME, 
		d.MANAGER_ID, 
		l.CITY, 
		e.LAST_NAME
	FROM 
		LOCATIONS l, 
		departments d, 
		EMPLOYEES e 
	WHERE d.DEPARTMENT_ID = #{department_id}
	AND d.MANAGER_ID = e.MANAGER_ID
	AND l.LOCATION_ID = d.LOCATION_ID
	</select>

</mapper>
